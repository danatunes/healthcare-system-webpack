"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[753],{8979:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(2982),a=n(5861),s=n(885),i=n(7757),o=n.n(i),l=n(2791),c=n(9910),d=n(3504),u=n(6871),f=n(8182),m=n(3626),x=n(9434),h=n(9123),g=n(6960),p=n.p+"static/media/avatardefault.10691648d79aa2f92514.png",j=function(e){return{type:"SET_DOCTOR_AVATAR",payload:e}},v=function(e){return{type:"SET_IS_FETCHING",payload:e}},y=function(e){return{type:"SET_ERROR",payload:e}},b=function(e){return function(){var t=(0,a.Z)(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(v(!0)),t.prev=1,t.next=4,h.g.get("/api/v1/patient/profile/doctor/"+e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e.data,"doctor data.data"),n({type:"SET_DOCTOR",payload:e.data})}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),(0,g.Am)("Please check credentials",{type:"error",theme:"light"}),n(y(!0));case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()},w=n(3729),k=n(9799),N=n(3278);var O=l.forwardRef((function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}))})),Z=n(2079),A=n(184),S=function(){var e=(0,x.v9)((function(e){return e.doctor})).doctor,t=(0,l.useState)(!1),n=(0,s.Z)(t,2),r=n[0],i=n[1],g=(0,l.useState)(!1),S=(0,s.Z)(g,2),C=S[0],R=S[1],F=(0,l.useState)([]),I=(0,s.Z)(F,2),T=I[0],D=I[1],B=(0,l.useState)([]),L=(0,s.Z)(B,2),z=L[0],V=L[1];console.log(T,"workCalendar");var P=(0,x.I0)(),_=(0,u.UO)().id,M=(0,l.useRef)(),H=(0,l.useRef)(),U=(0,l.useRef)(null),G=function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.g.get("/api/v1/schedule/doctor/"+t).then((function(e){D(e.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){!function(){var e,t=T;T.map((function(n,r){e=n.times.filter((function(e){return console.log(e.dayOfWeek.includes(n.dayOfWeek)),e.dayOfWeek.includes(n.dayOfWeek)})),t[r].times=e})),D(t)}(),R(!0)},J=function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,h.g.post("/api/v1/appointment/create",z,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:R(!1),G(_);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=(new Date).toISOString().slice(0,10),r={date:n.toString(),text:H.current.value,rate:parseFloat(M.current.value)},console.log(r),e.prev=4,e.next=7,h.g.post("/api/v1/feedback/doctor/give/"+_,r,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:P(b(_)),i(!1);case 14:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e;P(j(null)),P((e=_,function(){var t=(0,a.Z)(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(v(!0)),t.prev=1,t.next=4,h.g.get("/api/v1/file/avatar/"+e,{responseType:"blob",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){var t=URL.createObjectURL(e.data);console.log(t,"doctor avatar"),n(j(t))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),n(j(p)),n(y(!0));case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}())),console.log("useEffect"),P(b(_)),G(_)}),[_,P]),(0,A.jsx)("div",{className:"w-full space-y-4 max-w-4xl",children:e.doctor?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(W,{userInformation:e.doctor}),(0,A.jsxs)("div",{children:[(0,A.jsx)(c.aV,{styleList:"rounded-t-lg",className:"shadow-md h-fit max-h-[450px]",header:(0,A.jsxs)("div",{className:"w-full flex flex-row justify-between",children:[(0,A.jsx)(d.OL,{to:"",end:!0,className:function(e){var t=e.isActive;return(0,f.Z)("font-medium text-lg focus:text-[#3A57E8]",t&&"text-[#3A57E8]")},children:"About Me"}),(0,A.jsx)(d.OL,{to:"feedback",className:function(e){var t=e.isActive;return(0,f.Z)("font-medium text-lg focus:text-[#3A57E8]",t&&"text-[#3A57E8]")},children:"Feedback"}),(0,A.jsx)("p",{onClick:function(){return q()},className:function(e){var t=e.isActive;return(0,f.Z)("font-medium text-lg focus:text-[#3A57E8]",t&&"text-[#3A57E8]")},children:"Calendar"})]}),children:(0,A.jsx)(l.Suspense,{fallback:(0,A.jsx)(m.Z,{}),children:(0,A.jsx)(u.j3,{})})}),(0,A.jsx)(d.OL,{to:"feedback",onClick:function(){return i(!0)},className:(0,f.Z)("py-2 px-4 bg-[#3A57E8] rounded-b-lg w-full flex justify-center font-medium text-lg focus:text-[#3A57E8]"),children:(0,A.jsxs)("div",{className:"flex flex-row justify-between items-center space-x-5",children:[(0,A.jsx)(w.Z,{className:"w-7 text-white"}),(0,A.jsx)("p",{className:"font-bold text-lg text-white",children:"Add Feedback"})]})})]}),(0,A.jsxs)(k.u,{isOpen:r,setIsOpen:i,handleSubmit:K,feedbackRef:H,ratingRef:M,children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,A.jsx)(N.Z,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,A.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,A.jsx)(Z.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:"Add Feedback and Rating"}),(0,A.jsxs)("div",{className:"mt-2",children:[(0,A.jsxs)("label",{htmlFor:"rating",children:["Rating:",(0,A.jsxs)("select",{ref:M,name:"rating",id:"rating",className:"rounded-md ml-2 mb-2",children:[(0,A.jsx)("option",{value:"1",children:"1"}),(0,A.jsx)("option",{value:"2",children:"2"}),(0,A.jsx)("option",{value:"3",children:"3"}),(0,A.jsx)("option",{value:"4",children:"4"}),(0,A.jsx)("option",{value:"5",children:"5"})]})]}),(0,A.jsx)("input",{ref:H,type:"text",id:"feedback",className:"rounded-lg w-full",placeholder:"Such are nice ...."})]})]})]}),(0,A.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,A.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm",children:"Submit"}),(0,A.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:function(){return i(!1)},ref:U,children:"Cancel"})]})]}),(0,A.jsx)(k.u,{setIsOpen:R,isOpen:C,handleSubmit:J,children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"w-full",children:[(0,A.jsx)("div",{className:"mx-auto w-full flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,A.jsx)(O,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,A.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,A.jsx)(Z.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:"Make an appointment"}),(0,A.jsx)("div",{className:"mt-2 flex flex-col space-y-4",children:(0,A.jsx)(E,{setWorkCalendar:V,dataFromPatient:T})})]})]}),(0,A.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,A.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm",children:"Submit"}),(0,A.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:function(){return R(!1)},ref:U,children:"Cancel"})]})]})})]}):(0,A.jsx)(m.Z,{})})},W=function(e){var t=e.userInformation,n=(0,x.v9)((function(e){return e.doctor})).avatar;return console.log(t,"userinfo"),(0,A.jsx)("div",{className:"bg-white overflow-hidden rounded-xl shadow-md",children:(0,A.jsxs)("div",{className:(0,f.Z)("flex flex-col items-end","lg:flex-row"),children:[n?(0,A.jsx)("img",{src:n,alt:"",className:(0,f.Z)("w-full","lg:w-56 lg:h-56")}):(0,A.jsx)(m.Z,{}),(0,A.jsxs)("div",{className:"py-3 px-8 space-y-3 w-full",children:[(0,A.jsxs)("h3",{className:"text-2xl font-bold overflow-x-auto",children:["Hospital : ",t.hospital.name]}),(0,A.jsx)("h4",{className:"text-xl leading-8",children:"Dr. ".concat(t.user.firstName," ").concat(t.user.lastName)}),(0,A.jsxs)("div",{className:(0,f.Z)("flex flex-wrap"),children:[(0,A.jsx)(C,{label:"Position",information:t.user.role.name}),(0,A.jsx)(C,{label:"Email",information:t.user.email}),(0,A.jsx)(C,{label:"Rate",information:t.rate}),(0,A.jsx)(C,{label:"Date of Birth",information:"22-05-2000"}),(0,A.jsx)(C,{label:"Phone",information:t.user.phoneNumber}),(0,A.jsx)(C,{label:"Specialization",information:t.specialization.name})]})]})]})})},C=function(e){var t=e.label,n=e.information;return(0,A.jsxs)("div",{className:(0,f.Z)("w-full flex flex-row justify-between flex-grow","sm:w-1/3 sm:flex-col"),children:[(0,A.jsx)("p",{className:(0,f.Z)("text-sm text-gray-400 mr-2","sm:mr-0"),children:t}),(0,A.jsx)("p",{className:"text-md font-bold overflow-x-auto truncate",children:n})]})},E=function(e){var t=e.setWorkCalendar,n=e.dataFromPatient,r=localStorage.getItem("role");return(0,A.jsxs)("div",{className:"flex py-9 flex-col bg-white items-center justify-center",children:[(0,A.jsx)("h1",{className:"text-lg font-bold",children:"Reception hours"}),(0,A.jsx)("div",{className:"flex mt-3 flex-row w-full justify-evenly space-x-5 items-start",children:"PATIENT"===r?n.map((function(e,n){return(0,A.jsx)(R,{times:e.times,dayOfWeek:e.dayOfWeek,style:n%2===0?"text-green-300":"text-black-300",date:e.date,setWorkCalendar:t},"".concat(e.dayOfWeek," ").concat(n))})):[{id:1,dayOfWeek:"mmmMonday",times:["09:00","10:00","11:00","12:00","13:00"]},{id:2,dayOfWeek:"Tuesday",times:["09:00","10:00","11:00","12:00","13:00"]},{id:3,dayOfWeek:"Wednesday",times:["09:00","10:00","11:00","12:00","13:00"]},{id:4,dayOfWeek:"Thursday",times:["09:00","10:00","11:00","12:00","13:00"]},{id:5,dayOfWeek:"Friday",times:["09:00","10:00","11:00","12:00","13:00"]}].map((function(e){return(0,A.jsx)(R,{times:e.times,dayOfWeek:e.dayOfWeek,setWorkCalendar:t},e.dayOfWeek)}))})]})},R=function(e){var t=e.dayOfWeek,n=e.style,r=e.date,a=e.times,s=e.setWorkCalendar;return(0,A.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,A.jsx)(A.Fragment,{children:a.length>0?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("h3",{className:n,children:t}),(0,A.jsx)(F,{timeByDay:a,date:r,day:t,setWorkCalendar:s})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("h3",{className:"text-gray-400",children:t}),(0,A.jsx)("p",{children:"-"})]})})})},F=function(e){var t=e.timeByDay,n=(e.day,e.date),a=e.setWorkCalendar,i=(0,l.useState)(""),o=(0,s.Z)(i,2),c=o[0],d=o[1];return console.log(t,"timeByDay"),(0,A.jsx)("ul",{className:"mt-3.5 space-y-2.5",children:t.map((function(e){return(0,A.jsx)("li",{onClick:function(){d((function(t){return[].concat((0,r.Z)(t),[e.time])})),a({date:n,scheduleId:e.id,isFree:!1})},className:(0,f.Z)("px-2 py-1.5 rounded-lg border flex items-center justify-center","active:bg-[#3A57E8]",c.includes(e.time)&&"bg-[#3A57E8] text-white","focus:outline-none focus:ring focus:ring-violet-300"),children:e.time.substring(0,5)},e.id)}))})}}}]);
//# sourceMappingURL=753.37dcb8cc.chunk.js.map