"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[648],{1648:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=a(5861),r=a(885),i=a(7757),s=a.n(i),l=a(2791),c=a(5060),o=a(1056),d=a(8182),p=a(9123),u=a(9660),m=a(3504),h=a(6871),f=a(6960),y=a(1134),x=a(184),g=function(){var e=(0,l.useState)([]),t=(0,r.Z)(e,2),a=t[0],i=t[1],g=(0,l.useState)([]),v=(0,r.Z)(g,2),b=v[0],j=v[1],w=(0,l.useState)(null),N=(0,r.Z)(w,2),k=(N[0],N[1]),C=(0,h.s0)(),I=(0,y.cI)().register;function A(){return(A=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.g)("/api/v1/city/get-all");case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.message&&(0,f.Am)(e.t0.message,{type:"error",theme:"light"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}(0,l.useEffect)((function(){(function(){return A.apply(this,arguments)})().then()}),[]);var S=function(){var e=(0,n.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.find((function(e){e.name===t.target.value&&(n=e.id)})),k(n),e.next=4,p.g.get("api/v1/hospital/city/"+n);case 4:r=e.sent,j(r.data.hospitals);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,n.Z)(s().mark((function e(t){var a,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=new FormData(t.currentTarget),console.log(a),n=Object.fromEntries(a),console.log(n),b.find((function(e){e.name===n.hospitalId&&(r=e.id)})),delete n.city,delete n.cityId,n.hospitalId=r,!n.phoneNumber.toString().includes("a",/[A-Z] || [a-z] || " "/)){e.next=13;break}return(0,f.Am)("Wrong number",{style:"error",position:"top-right"}),e.abrupt("return");case 13:return e.prev=13,e.next=16,p.g.post("api/v1/auth/registration/patient",n);case 16:(0,f.Am)("Succesfully created",{type:"success",theme:"light"}),C("/login"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),e.t0.message&&(0,f.Am)(e.t0.response.data.message,{type:"error",theme:"light"});case 23:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)("form",{onSubmit:F,children:[(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,x.jsx)("h1",{className:"items-center text-4xl font-medium text-black",children:"Sign Up"}),(0,x.jsx)("p",{className:"text-[#8A92A6]",children:"Create your account"})]}),(0,x.jsxs)("div",{className:(0,d.Z)("grid grid-cols-1 gap-3","md:grid-cols-2"),children:[[{id:"fatherName",name:"Father Name",type:"text"},{id:"firstName",name:"First Name",type:"text"},{id:"lastName",name:"Last Name",type:"text"},{id:"email",name:"Email",type:"email"},{id:"phoneNumber",name:"Phone",type:"tel"},{id:"iin",name:"IIN",type:"text"},{id:"dateOfBirth",name:"Date of Birthday",type:"date"},{id:"password",name:"Password",type:"password"},{id:"rePassword",name:"Confirm Password",type:"password"},{id:"cityId",name:"City",type:"datalistCity"},{id:"hospitalId",name:"Clinics",type:"datalist"}].map((function(e){return(0,x.jsx)("label",{htmlFor:e.id,children:(0,x.jsx)(c.M,{id:"".concat(e.id),max:"2022-05-31",required:!0,register:I,name:e.name,type:"datalist"===e.type||"datalistCity"===e.type?null:e.type,onChange:"datalistCity"===e.type?S:null,placeholder:e.name,autoComplete:"off",list:"datalist"===e.type||"datalistCity"===e.type?"".concat(e.id,"_list"):null},e.id)})})),(0,x.jsxs)("select",{name:"gender",id:"gender",className:"mt-1 min-w-[250px] border-t-0 border-r-0 border-l-0 bg-none border-b border-black focus-within:border-indigo-600",children:[(0,x.jsx)("option",{value:"Male",children:"Male"}),(0,x.jsx)("option",{value:"Female",children:"Female"}),(0,x.jsx)("option",{value:"Other",children:"Other"})]}),(0,x.jsx)(u.V,{data:b,id:"hospitalId_list"}),(0,x.jsx)(u.V,{data:a,id:"cityId_list"})]}),(0,x.jsxs)("div",{className:"flex flex-col items-center mt-4 justify-center space-y-5",children:[(0,x.jsx)(o.z,{name:"Sign up",type:"submit"}),(0,x.jsxs)("p",{className:"text-black",children:["Already have an Account"," ",(0,x.jsx)(m.OL,{className:"text-[#458FF6]",to:"/login",children:"Sign in"})]})]})]})}}}]);
//# sourceMappingURL=648.71e982b1.chunk.js.map